---
title: Publications
layout: layouts/base.njk
permalink: "/publications/"
---

<section class="page-header">
  <div class="container">
    <h1 class="page-title">Publications</h1>
    <p class="lead text-muted mb-0">
      Selected peer-reviewed publications by our team and our collaborators that use BirdNET, BirdNET-derived embeddings, or BirdNET-based workflows.
    </p>
  </div>
</section>

<section class="py-5">
  <div class="container">

    {# Filter bar: clickable tag pills #}
    <div class="mb-4" id="tagFilterControls">
      <p class="small text-muted mb-4">
        Click one or more tags to filter publications. Click again to deselect. Use Clear to reset.
      </p>
      <div class="d-flex flex-wrap align-items-center gap-2">
        <div id="tagToggleBar" class="d-flex flex-wrap gap-2"></div>
        <button type="button" id="clearTagFilter" class="btn btn-sm btn-secondary">Clear</button>
      </div>
      <div id="activeTagChips" class="d-flex flex-wrap gap-1 mt-2"></div>
    </div>

    {# Badge class helper for tags #}
    {% macro tagBadgeClass(t) -%}
      {%- set x = t | lower -%}
      {%- if 'dataset' in x -%}bg-warning text-dark
      {%- elif 'embedding' in x -%}bg-info
      {%- elif 'best' in x or 'guideline' in x -%}bg-primary-subtle text-primary-emphasis
      {%- elif 'citizen' in x -%}bg-danger
      {%- elif 'real-time' in x or 'real time' in x -%}bg-success
      {%- elif 'ecology' in x -%}bg-success-subtle text-success-emphasis
      {%- elif 'pam' in x -%}bg-secondary
      {%- elif 'models' in x or 'deep' in x -%}bg-dark
      {%- else -%}bg-light text-muted
      {%- endif -%}
    {%- endmacro %}

    {# Loop over groups by year #}
    {% for group in publications.byYear %}
      <div class="mb-4 pub-year-group">
        <h2 class="h5 text-uppercase text-muted mb-3">{{ group.year }}</h2>
        <div class="row g-3">
          {% for p in group.items %}
            <div class="col-12">
              <div
                class="card card-publication shadow-sm"
                data-tags="{{ (p.tags or []) | join(',') }}"
              >
                <div class="card-body">

                  {# Top badges from BibTeX tags #}
                  {% if p.tags and p.tags.length %}
                    <div class="d-flex flex-wrap align-items-baseline gap-2 mb-2">
                      {% for t in p.tags %}
                        <span class="badge rounded-pill {{ tagBadgeClass(t) }} pub-badge">{{ t }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}

                  <h3 class="h5 mb-1">
                    {{ p.title | safe }}
                  </h3>

                  {% if p.authors and p.authors.length %}
                    <p class="pub-authors mb-1 text-muted">
                      {{ p.authors | join(", ") }}{% if p.year %} ({{ p.year }}){% endif %}
                    </p>
                  {% elseif p.year %}
                    <p class="pub-authors mb-1 text-muted">({{ p.year }})</p>
                  {% endif %}

                  <p class="pub-meta mb-0 text-muted small">
                    {% if p.journal %}<em>{{ p.journal }}</em>{% endif %}
                    {% if p.volume %}, {{ p.volume }}{% endif %}
                    {% if p.number %}({{ p.number }}){% endif %}
                    {% if p.pages %}, {{ p.pages }}{% endif %}
                  </p>

                  {% if p.url %}
                    <div class="mt-2">
                      <a href="{{ p.url }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-primary">
                        Open <span aria-hidden="true">â†—</span>
                        <span class="visually-hidden">(opens in a new tab)</span>
                      </a>
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}

  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const toggleBar = document.getElementById('tagToggleBar');
  const chipsEl = document.getElementById('activeTagChips');
  const clearBtn = document.getElementById('clearTagFilter');
  const cards = Array.from(document.querySelectorAll('.card.card-publication'));
  const groups = Array.from(document.querySelectorAll('.pub-year-group'));

  // Collect unique tags
  const tagSet = new Set();
  cards.forEach(c => {
    (c.dataset.tags || '')
      .split(',')
      .map(s => s.trim())
      .filter(Boolean)
      .forEach(t => tagSet.add(t));
  });
  const tags = Array.from(tagSet).sort((a,b)=>a.localeCompare(b));

  function renderTagPills() {
    tags.forEach(t => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'btn btn-sm btn-outline-primary tag-pill';
      btn.textContent = t;
      btn.dataset.tag = t;
      btn.setAttribute('aria-pressed', 'false');
      btn.addEventListener('click', () => {
        const active = btn.getAttribute('aria-pressed') === 'true';
        btn.setAttribute('aria-pressed', active ? 'false' : 'true');
        btn.classList.toggle('btn-primary', !active);
        btn.classList.toggle('btn-outline-primary', active);
        applyFilter();
      });
      toggleBar.appendChild(btn);
    });
  }

  function getSelectedTags() {
    return Array.from(document.querySelectorAll('.tag-pill[aria-pressed="true"]'))
      .map(b => b.dataset.tag);
  }

  function updateChips(selected) {
    chipsEl.innerHTML = '';
    if (!selected.length) return;
    selected.forEach(t => {
      const chip = document.createElement('span');
      chip.className = 'badge bg-secondary';
      chip.textContent = t;
      chipsEl.appendChild(chip);
    });
  }

  function applyFilter() {
    const selected = getSelectedTags();
    cards.forEach(card => {
      const ct = (card.dataset.tags || '')
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);
      const visible = selected.length === 0 || selected.some(t => ct.includes(t));
      const col = card.closest('.col-12');
      if (col) col.style.display = visible ? '' : 'none';
    });
    groups.forEach(g => {
      const anyVisible = g.querySelector('.col-12:not([style*="display: none"])');
      g.style.display = anyVisible ? '' : 'none';
    });
    updateChips(selected);
  }

  clearBtn.addEventListener('click', () => {
    document.querySelectorAll('.tag-pill').forEach(b => {
      b.setAttribute('aria-pressed','false');
      b.classList.remove('btn-primary');
      b.classList.add('btn-outline-primary');
    });
    applyFilter();
  });

  // Init
  renderTagPills();
  applyFilter();
});
</script>
